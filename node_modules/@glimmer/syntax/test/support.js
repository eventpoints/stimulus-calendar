'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.astEqual = astEqual;

var _syntax = require('@glimmer/syntax');

function normalizeNode(obj) {
    if (obj && typeof obj === 'object') {
        let newObj;
        if (Array.isArray(obj)) {
            newObj = obj.slice();
            for (let i = 0; i < obj.length; i++) {
                newObj[i] = normalizeNode(obj[i]);
            }
        } else {
            newObj = {};
            let keys = Object.keys(obj);
            for (let i = 0; i < keys.length; i++) {
                let key = keys[i];
                if (key === 'loc') continue;
                newObj[key] = normalizeNode(obj[key]);
            }
        }
        return newObj;
    } else {
        return obj;
    }
}
function astEqual(actual, expected, message, parseOptions) {
    if (typeof actual === 'string') {
        actual = (0, _syntax.preprocess)(actual, parseOptions);
    }
    if (typeof expected === 'string') {
        expected = (0, _syntax.preprocess)(expected, parseOptions);
    }
    actual = normalizeNode(actual);
    expected = normalizeNode(expected);
    QUnit.assert.deepEqual(actual, expected, message);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC90ZXN0L3N1cHBvcnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7UUF5QmdCLFEsR0FBQSxROzs7O0FBdkJoQixTQUFTLGFBQVQsQ0FBdUIsR0FBdkIsRUFBc0Q7QUFDcEQsUUFBSSxPQUFPLE9BQU8sR0FBUCxLQUFlLFFBQTFCLEVBQW9DO0FBQ2xDLFlBQUksTUFBSjtBQUNBLFlBQUksTUFBTSxPQUFOLENBQWMsR0FBZCxDQUFKLEVBQXdCO0FBQ3RCLHFCQUFTLElBQUksS0FBSixFQUFUO0FBQ0EsaUJBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxJQUFJLE1BQXhCLEVBQWdDLEdBQWhDLEVBQXFDO0FBQ25DLHVCQUFPLENBQVAsSUFBWSxjQUFjLElBQUksQ0FBSixDQUFkLENBQVo7QUFDRDtBQUNGLFNBTEQsTUFLTztBQUNMLHFCQUFTLEVBQVQ7QUFDQSxnQkFBSSxPQUFPLE9BQU8sSUFBUCxDQUFZLEdBQVosQ0FBWDtBQUNBLGlCQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUF6QixFQUFpQyxHQUFqQyxFQUFzQztBQUNwQyxvQkFBSSxNQUFNLEtBQUssQ0FBTCxDQUFWO0FBQ0Esb0JBQUksUUFBUSxLQUFaLEVBQW1CO0FBQ25CLHVCQUFPLEdBQVAsSUFBYyxjQUFlLElBQVksR0FBWixDQUFmLENBQWQ7QUFDRDtBQUNGO0FBQ0QsZUFBTyxNQUFQO0FBQ0QsS0FqQkQsTUFpQk87QUFDTCxlQUFPLEdBQVA7QUFDRDtBQUNGO0FBRUssU0FBVSxRQUFWLENBQ0osTUFESSxFQUVKLFFBRkksRUFHSixPQUhJLEVBSUosWUFKSSxFQUk0QjtBQUVoQyxRQUFJLE9BQU8sTUFBUCxLQUFrQixRQUF0QixFQUFnQztBQUM5QixpQkFBUyx3QkFBTSxNQUFOLEVBQWMsWUFBZCxDQUFUO0FBQ0Q7QUFDRCxRQUFJLE9BQU8sUUFBUCxLQUFvQixRQUF4QixFQUFrQztBQUNoQyxtQkFBVyx3QkFBTSxRQUFOLEVBQWdCLFlBQWhCLENBQVg7QUFDRDtBQUVELGFBQVMsY0FBYyxNQUFkLENBQVQ7QUFDQSxlQUFXLGNBQWMsUUFBZCxDQUFYO0FBRUEsVUFBTSxNQUFOLENBQWEsU0FBYixDQUF1QixNQUF2QixFQUErQixRQUEvQixFQUF5QyxPQUF6QztBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJlcHJvY2VzcyBhcyBwYXJzZSwgQVNULCBQcmVwcm9jZXNzT3B0aW9ucyB9IGZyb20gJ0BnbGltbWVyL3N5bnRheCc7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU5vZGUob2JqOiBBU1QuTm9kZSB8IEFycmF5PEFTVC5Ob2RlPik6IEFTVC5Ob2RlIHwgQXJyYXk8QVNULk5vZGU+IHtcbiAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIGxldCBuZXdPYmo6IGFueTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICBuZXdPYmogPSBvYmouc2xpY2UoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5ld09ialtpXSA9IG5vcm1hbGl6ZU5vZGUob2JqW2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3T2JqID0ge307XG4gICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGtleSA9IGtleXNbaV07XG4gICAgICAgIGlmIChrZXkgPT09ICdsb2MnKSBjb250aW51ZTtcbiAgICAgICAgbmV3T2JqW2tleV0gPSBub3JtYWxpemVOb2RlKChvYmogYXMgYW55KVtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3RFcXVhbChcbiAgYWN0dWFsOiBhbnkgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBleHBlY3RlZDogYW55IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgbWVzc2FnZT86IHN0cmluZyxcbiAgcGFyc2VPcHRpb25zPzogUHJlcHJvY2Vzc09wdGlvbnNcbikge1xuICBpZiAodHlwZW9mIGFjdHVhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBhY3R1YWwgPSBwYXJzZShhY3R1YWwsIHBhcnNlT3B0aW9ucyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICBleHBlY3RlZCA9IHBhcnNlKGV4cGVjdGVkLCBwYXJzZU9wdGlvbnMpO1xuICB9XG5cbiAgYWN0dWFsID0gbm9ybWFsaXplTm9kZShhY3R1YWwpO1xuICBleHBlY3RlZCA9IG5vcm1hbGl6ZU5vZGUoZXhwZWN0ZWQpO1xuXG4gIFFVbml0LmFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9